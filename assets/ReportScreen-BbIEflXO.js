import{j as e,A as de,m as A,X as ne,a as le,l as F,q as K,D as oe,W as R,f as ie,g as O,r as Q,R as z,h as ce,s as B,u as G}from"./ui-ojUPcdkR.js";import{r as o,e as me}from"./vendor-S3JaNCHW.js";import{u as b}from"./useQuery-DrWLbDdI.js";import{c as p,u as xe,b as ue,e as v,p as H,d as he,a as y}from"./index-b6SL6hsZ.js";import{u as U}from"./useMutation-CvMS9LLC.js";import{M as I}from"./Modal-ChpNS6wC.js";import{R as N}from"./config-4dfLyK49.js";function be(i){const[l,t]=o.useState(!1);return o.useEffect(()=>{const d=window.matchMedia(i);d.matches!==l&&t(d.matches);const c=()=>t(d.matches);return d.addEventListener("change",c),()=>d.removeEventListener("change",c)},[l,i]),l}const pe=({isOpen:i,onClose:l,title:t,children:d,className:c})=>{const r=be("(min-width: 768px)");return o.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i]),typeof document>"u"?null:me.createPortal(e.jsx(de,{children:i&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-center items-end md:items-center pointer-events-none",children:[e.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] pointer-events-auto"}),e.jsxs(A.div,{initial:r?{opacity:0,scale:.95}:{y:"100%"},animate:r?{opacity:1,scale:1}:{y:0},exit:r?{opacity:0,scale:.95}:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:p("relative z-10 bg-card shadow-2xl overflow-y-auto outline-none pointer-events-auto","w-full rounded-t-[2rem] border-t border-border max-h-[85vh]","md:w-full md:max-w-lg md:rounded-[2rem] md:border md:max-h-[85vh] md:m-4",c),drag:r?!1:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:(C,a)=>{a.offset.y>100&&l()},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-1 md:hidden",children:e.jsx("div",{className:"w-12 h-1.5 bg-muted rounded-full"})}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border/50",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground",children:t}),e.jsx("button",{onClick:l,className:"p-2 -mr-2 text-muted-foreground hover:text-foreground hover:bg-muted rounded-full transition-colors",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:d})]})]})}),document.body)},ge=new Date().getMonth()+1,D=new Date().getFullYear();function Se(){const{user:i}=xe(),l=i?.role==="admin",t=ue(),[d,c]=o.useState("income"),[r,C]=o.useState(ge.toString()),[a]=o.useState(D.toString()),[Y,x]=o.useState(!1),[$,w]=o.useState(!1),[m,u]=o.useState(null),[k,S]=o.useState({isOpen:!1,message:""}),{data:h,isLoading:J}=b({queryKey:["transactions",r,a],queryFn:()=>y.getTransactions(parseInt(r),parseInt(a)),staleTime:5*1e3,refetchInterval:N}),{data:M,isLoading:W}=b({queryKey:["students",r,a],queryFn:()=>y.getStudents(parseInt(r),parseInt(a)),staleTime:5*1e3,refetchInterval:N}),{data:E,isLoading:V}=b({queryKey:["stats"],queryFn:y.getStats,staleTime:5*1e3,refetchInterval:N}),{data:_}=b({queryKey:["settings"],queryFn:()=>y.getSettings(),staleTime:30*1e3}),{data:g,isLoading:X}=b({queryKey:["incomeList",r,a],queryFn:()=>H.getList(parseInt(r),parseInt(a)),staleTime:5*1e3,refetchInterval:N}),T=U({mutationFn:s=>H.delete(s),onSuccess:()=>{t.invalidateQueries({queryKey:["incomeList"]}),t.invalidateQueries({queryKey:["students"]}),t.invalidateQueries({queryKey:["stats"]}),t.invalidateQueries({queryKey:["dashboardStats"]}),t.invalidateQueries({queryKey:["arrears"]}),u(null),w(!0)},onError:s=>{S({isOpen:!0,message:"Gagal menghapus pemasukan: "+(s.message||"Unknown error")})}}),q=U({mutationFn:s=>he.delete(s),onSuccess:()=>{t.invalidateQueries({queryKey:["transactions"]}),t.invalidateQueries({queryKey:["stats"]}),t.invalidateQueries({queryKey:["dashboardStats"]}),u(null),w(!0)},onError:s=>{S({isOpen:!0,message:"Gagal menghapus pengeluaran: "+(s.message||"Unknown error")})}}),Z=()=>{m&&(m.type==="income"?T.mutate(m.id):q.mutate(m.id))},ee=J||V||W||X,P=[{label:"Januari",value:"1"},{label:"Februari",value:"2"},{label:"Maret",value:"3"},{label:"April",value:"4"},{label:"Mei",value:"5"},{label:"Juni",value:"6"},{label:"Juli",value:"7"},{label:"Agustus",value:"8"},{label:"September",value:"9"},{label:"Oktober",value:"10"},{label:"November",value:"11"},{label:"Desember",value:"12"}],se=P[parseInt(r)-1]?.label||"Unknown";if(ee||!h||!E||!M)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(le,{className:"w-8 h-8 animate-spin text-primary"})});const f=M.reduce((s,n)=>s+(n.m1||0)+(n.m2||0)+(n.m3||0)+(n.m4||0)+(n.m5||0),0),j=h.filter(s=>s.type==="expense").reduce((s,n)=>s+n.amount,0),re=E.balance,te=_&&_.weeklyFee>0,ae=f>0||j>0||te;return e.jsxs("div",{className:"p-4 md:p-8 bg-background min-h-screen animate-fadeIn pb-32 font-sans",children:[e.jsx("div",{className:"max-w-5xl mx-auto space-y-8",children:e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"pb-2",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-foreground tracking-tight",children:"Laporan Keuangan"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 text-sm md:text-base max-w-md font-medium",children:"Ringkasan lengkap aktivitas keuangan kas."})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto",children:e.jsxs("div",{className:"bg-card p-2 rounded-2xl shadow-sm border border-border flex flex-row items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"hidden sm:flex w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 items-center justify-center text-indigo-600 dark:text-indigo-400 shrink-0",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative h-10",children:[e.jsx("select",{value:r,onChange:s=>C(s.target.value),className:"w-full h-full pl-3 pr-8 rounded-xl bg-muted/30 border-transparent hover:bg-muted/50 focus:bg-muted/50 transition-colors text-sm font-bold text-foreground appearance-none outline-none cursor-pointer",children:P.map(s=>e.jsx("option",{value:s.value,className:"bg-card text-foreground",children:s.label},s.value))}),e.jsx(K,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),e.jsx("div",{className:"relative h-10",children:e.jsx("select",{value:a,disabled:!0,className:"w-full h-full pl-3 pr-3 rounded-xl bg-muted/30 border-transparent text-center text-sm font-bold text-muted-foreground appearance-none outline-none cursor-not-allowed",children:e.jsx("option",{value:D,children:D})})})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-8 bg-border mx-1"}),e.jsx("div",{className:"relative shrink-0",children:e.jsxs("button",{onClick:()=>x(!0),className:"h-10 w-10 sm:w-auto px-0 sm:px-4 rounded-xl hover:bg-muted/50 transition-colors flex items-center justify-center gap-2 group border border-transparent hover:border-border sm:border-0 bg-muted/30 sm:bg-transparent","aria-label":"Export Laporan",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:e.jsx(oe,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"hidden sm:inline text-sm font-bold text-foreground",children:"Export"}),e.jsx(K,{className:"hidden sm:block w-4 h-4 text-muted-foreground"})]})})]})})]}),ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"group relative p-6 rounded-[2rem] bg-card border border-border shadow-[0_8px_30px_rgb(0,0,0,0.04)] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-2xl flex items-center justify-center",children:e.jsx(R,{className:"w-6 h-6 stroke-[2px]"})}),e.jsx("span",{className:"text-xs font-bold px-2.5 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full",children:"Total Kas"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-bold uppercase tracking-wider mb-2",children:"Saldo Akhir"}),e.jsxs("h3",{className:"text-2xl font-extrabold text-foreground",children:["Rp ",re.toLocaleString("id-ID")]})]}),e.jsx("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-blue-500 rounded-full opacity-5 blur-2xl transition-opacity group-hover:opacity-10"})]}),e.jsxs("div",{className:"group relative p-6 rounded-[2rem] bg-card border border-border shadow-[0_8px_30px_rgb(0,0,0,0.04)] overflow-hidden",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsx("div",{className:"w-12 h-12 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-2xl flex items-center justify-center",children:e.jsx(ie,{className:"w-6 h-6 stroke-[2px]"})})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-bold uppercase tracking-wider mb-2",children:"Total Pemasukan"}),e.jsxs("h3",{className:"text-2xl font-extrabold text-emerald-600 dark:text-emerald-400",children:["+Rp ",f.toLocaleString("id-ID")]})]}),e.jsx("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-emerald-500 rounded-full opacity-5 blur-2xl transition-opacity group-hover:opacity-10"})]}),e.jsxs("div",{className:"group relative p-6 rounded-[2rem] bg-card border border-border shadow-[0_8px_30px_rgb(0,0,0,0.04)] overflow-hidden",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsx("div",{className:"w-12 h-12 bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 rounded-2xl flex items-center justify-center",children:e.jsx(O,{className:"w-6 h-6 stroke-[2px]"})})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-bold uppercase tracking-wider mb-2",children:"Total Pengeluaran"}),e.jsxs("h3",{className:"text-2xl font-extrabold text-rose-600 dark:text-rose-400",children:["-Rp ",j.toLocaleString("id-ID")]})]}),e.jsx("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-rose-500 rounded-full opacity-5 blur-2xl transition-opacity group-hover:opacity-10"})]})]}),e.jsxs("div",{className:"flex md:hidden bg-card p-1 rounded-xl shadow-sm border border-border sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>c("income"),className:p("flex-1 py-2.5 text-xs font-bold rounded-lg transition-all",d==="income"?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 shadow-sm":"text-muted-foreground hover:bg-muted"),children:"Pemasukan"}),e.jsx("button",{onClick:()=>c("expense"),className:p("flex-1 py-2.5 text-xs font-bold rounded-lg transition-all",d==="expense"?"bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400 shadow-sm":"text-muted-foreground hover:bg-muted"),children:"Pengeluaran"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:p("space-y-4",d==="expense"?"hidden md:block":"block"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-bold text-foreground flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]"}),"Rincian Pemasukan"]}),e.jsxs("span",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-full",children:[g?.length||0," transaksi"]})]}),e.jsx("div",{className:"space-y-3 h-[500px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-800 scrollbar-track-transparent",children:g&&g.length>0?g.map(s=>{let n="-";if(s.tanggal)try{const L=new Date(s.tanggal);isNaN(L.getTime())||(n=L.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}))}catch{n=s.tanggal}return e.jsxs("div",{className:"group flex justify-between items-center bg-card p-4 rounded-[1.5rem] border border-border shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground text-sm mb-0.5",children:s.nama}),e.jsxs("p",{className:"text-xs text-muted-foreground font-medium",children:["Minggu ",s.minggu_ke," • ",n]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-black text-emerald-600 dark:text-emerald-400 text-sm",children:["+Rp ",s.nominal.toLocaleString("id-ID")]})}),l&&e.jsx("button",{onClick:()=>u({isOpen:!0,type:"income",id:s.id,title:`${s.nama} - Minggu ${s.minggu_ke}`}),className:"opacity-100 md:opacity-0 md:group-hover:opacity-100 p-2 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition-all",title:"Hapus pemasukan",children:e.jsx(Q,{className:"w-4 h-4"})})]})]},s.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 px-6 text-center bg-muted/30 rounded-[1.5rem] h-full",children:[e.jsx("div",{className:"w-14 h-14 bg-card rounded-full flex items-center justify-center mb-3 shadow-sm",children:e.jsx(z,{className:"w-6 h-6 text-muted-foreground/50"})}),e.jsx("p",{className:"font-bold text-muted-foreground text-sm",children:"Belum ada pemasukan"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1 max-w-[200px]",children:"Tidak ada catatan transaksi masuk untuk periode ini."})]})})]}),e.jsxs("div",{className:p("space-y-4",d==="income"?"hidden md:block":"block"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-bold text-foreground flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}),"Rincian Pengeluaran"]}),e.jsxs("span",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-full",children:[h.filter(s=>s.type==="expense").length," transaksi"]})]}),e.jsxs("div",{className:"space-y-3 h-[500px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-800 scrollbar-track-transparent",children:[h.filter(s=>s.type==="expense").map(s=>e.jsxs("div",{className:"group flex justify-between items-center bg-card p-5 rounded-[1.5rem] border border-border shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-rose-50 dark:bg-rose-900/20 flex items-center justify-center text-rose-600 dark:text-rose-400 group-hover:scale-110 transition-transform",children:e.jsx(O,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground text-sm mb-0.5",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground font-medium",children:[s.date," • ",s.category]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-black text-rose-600 dark:text-rose-400 text-sm mb-1",children:["-Rp ",s.amount.toLocaleString("id-ID")]}),e.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[10px] text-emerald-700 dark:text-emerald-300 font-bold bg-emerald-50 dark:bg-emerald-900/40 px-2.5 py-1 rounded-full w-fit ml-auto",children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsx("span",{children:"Selesai"})]})]}),l&&e.jsx("button",{onClick:()=>u({isOpen:!0,type:"expense",id:s.id,title:s.title}),className:"opacity-100 md:opacity-0 md:group-hover:opacity-100 p-2 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition-all",title:"Hapus pengeluaran",children:e.jsx(Q,{className:"w-4 h-4"})})]})]},s.id)),h.filter(s=>s.type==="expense").length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 px-6 text-center bg-muted/30 rounded-[1.5rem] h-full",children:[e.jsx("div",{className:"w-14 h-14 bg-card rounded-full flex items-center justify-center mb-3 shadow-sm",children:e.jsx(z,{className:"w-6 h-6 text-muted-foreground/50"})}),e.jsx("p",{className:"font-bold text-muted-foreground text-sm",children:"Belum ada pengeluaran"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1 max-w-[200px]",children:"Tidak ada catatan transaksi keluar untuk periode ini."})]})]})]})]})]}):e.jsxs("div",{className:"bg-card rounded-[2rem] border border-dashed border-border p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(F,{className:"w-10 h-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Belum Ada Data"}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto mb-6",children:["Belum ada transaksi yang tercatat untuk periode ",e.jsx("span",{className:"font-semibold text-foreground",children:se}),". Silakan konfigurasikan kas di menu Settings."]})]}),e.jsx(pe,{isOpen:Y,onClose:()=>x(!1),title:"Export Laporan",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),e.jsx("div",{className:"text-xs font-extrabold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"Laporan Pemasukan"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{disabled:f<=0,onClick:()=>{x(!1),window.open(v.downloadGlobal("pdf",parseInt(r),parseInt(a)),"_blank")},className:"flex flex-col items-center justify-center p-4 rounded-2xl bg-muted/30 border border-transparent hover:border-emerald-200 dark:hover:border-emerald-800 hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10 transition-all group text-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-muted/30 disabled:hover:border-transparent",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white dark:bg-card border border-emerald-100 dark:border-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm group-hover:scale-105 transition-transform group-disabled:scale-100",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground text-sm",children:"PDF"}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:"Dokumen"})]})]}),e.jsxs("button",{disabled:f<=0,onClick:()=>{x(!1),window.open(v.downloadGlobal("excel",parseInt(r),parseInt(a)),"_blank")},className:"flex flex-col items-center justify-center p-4 rounded-2xl bg-muted/30 border border-transparent hover:border-emerald-200 dark:hover:border-emerald-800 hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10 transition-all group text-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-muted/30 disabled:hover:border-transparent",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white dark:bg-card border border-emerald-100 dark:border-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm group-hover:scale-105 transition-transform group-disabled:scale-100",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground text-sm",children:"Excel"}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:"Spreadsheet"})]})]})]})]}),e.jsx("div",{className:"h-px bg-border/50"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500"}),e.jsx("div",{className:"text-xs font-extrabold text-rose-600 dark:text-rose-400 uppercase tracking-wider",children:"Laporan Pengeluaran"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{disabled:j<=0,onClick:()=>{x(!1),window.open(v.downloadPengeluaran("pdf",parseInt(r),parseInt(a)),"_blank")},className:"flex flex-col items-center justify-center p-4 rounded-2xl bg-muted/30 border border-transparent hover:border-rose-200 dark:hover:border-rose-800 hover:bg-rose-50/50 dark:hover:bg-rose-900/10 transition-all group text-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-muted/30 disabled:hover:border-transparent",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white dark:bg-card border border-rose-100 dark:border-rose-900/30 flex items-center justify-center text-rose-600 dark:text-rose-400 shadow-sm group-hover:scale-105 transition-transform group-disabled:scale-100",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground text-sm",children:"PDF"}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:"Dokumen"})]})]}),e.jsxs("button",{disabled:j<=0,onClick:()=>{x(!1),window.open(v.downloadPengeluaran("excel",parseInt(r),parseInt(a)),"_blank")},className:"flex flex-col items-center justify-center p-4 rounded-2xl bg-muted/30 border border-transparent hover:border-rose-200 dark:hover:border-rose-800 hover:bg-rose-50/50 dark:hover:bg-rose-900/10 transition-all group text-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-muted/30 disabled:hover:border-transparent",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white dark:bg-card border border-rose-100 dark:border-rose-900/30 flex items-center justify-center text-rose-600 dark:text-rose-400 shadow-sm group-hover:scale-105 transition-transform group-disabled:scale-100",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground text-sm",children:"Excel"}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:"Spreadsheet"})]})]})]})]})]})}),e.jsx(I,{isOpen:!!m,onClose:()=>u(null),onConfirm:Z,title:`Hapus ${m?.type==="income"?"Pemasukan":"Pengeluaran"}?`,description:`Apakah Anda yakin ingin menghapus "${m?.title}"? Tindakan ini tidak dapat dibatalkan.`,type:"confirm",confirmLabel:T.isPending||q.isPending?"Menghapus...":"Ya, Hapus"}),e.jsx(I,{isOpen:$,onClose:()=>w(!1),title:"Berhasil Dihapus",description:"Item telah berhasil dihapus dari sistem.",type:"success"})]})}),e.jsx(I,{isOpen:k.isOpen,onClose:()=>S({...k,isOpen:!1}),title:"Gagal",description:k.message,type:"error"})]})}export{Se as ReportScreen};
